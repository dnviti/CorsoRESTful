CREATE TABLE Movies
(
	Id INT NOT NULL PRIMARY KEY,
	Name VARCHAR(255) NOT NULL,
	Rating INT NOT NULL,
	ReleaseDate DATETIME NOT NULL,
	CreatedOn DATETIME NOT NULL,
	ModifiedOn DATETIME NULL
);

CREATE TABLE Actors
(
	Id INT NOT NULL PRIMARY KEY,
	Name VARCHAR(255) NOT NULL,
	Surname VARCHAR(255) NOT NULL, 
    BirthDate DATETIME NULL,
	Role INT NOT NULL
);

CREATE TABLE ActorsMovies
(
	ActorId INT NOT NULL,
	MovieId INT NOT NULL,
	CONSTRAINT FK1_ActorsMovies FOREIGN KEY (ActorId)
	REFERENCES Movies(Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
	CONSTRAINT FK2_ActorsMovies FOREIGN KEY (MovieId)
	REFERENCES Movies(Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE Authors
(
	Id INT NOT NULL PRIMARY KEY,
	Name VARCHAR(255) NOT NULL,
	Surname VARCHAR(255) NOT NULL, 
    BirthDate DATETIME NULL,
	Role INT NOT NULL,
	MovieId INT NULL,
	CONSTRAINT FK1_Authors FOREIGN KEY (MovieId)
	REFERENCES Movies(Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE Shops
(
	Id INT NOT NULL PRIMARY KEY,
	Name VARCHAR(255) NOT NULL
);

CREATE TABLE ShopsMovies
(
	ShopId INT NOT NULL,
	MovieId INT NOT NULL,
	CONSTRAINT FK1_ShopsMovies FOREIGN KEY (ShopId)
	REFERENCES Shops(Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
	CONSTRAINT FK2_ShopsMovies FOREIGN KEY (MovieId)
	REFERENCES Movies(Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
